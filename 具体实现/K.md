## K

## 脚部运动控制

### 引言

步态是指在步行过程中，机器人各个关节在时间和空间上的协调关系，通常由各关节的运动轨迹来描述。步态规划的目标是产生期望的步态，即在某个步行周期中实现特定步态的各关节运动轨迹，这依赖于有效而可靠的步态规划方法。

步态规划是机器人稳定步行的基础，也是双足步行机器人研究中的关键技术。为了实现和提高机器人的行走性能，必须研究实用而有效的步态规划方法。

双足机器人具有较多的自由度，运动链结构复杂，行走时各自由度之间的协调较为困难。传统的两步规划法将前向运动与侧向运动分开进行，虽然可以获得稳定步态，但机器人行走动作不够流畅。为解决此问题，基于双足机器人的特点，采用三步规划法。

三步规划法在两步规划法的基础上，通过修正关节运动曲线，获得更加流畅的行走步态。第一步根据双足步行机器人的结构特点，规划机器人行走时的基本姿态及运动轨迹；第二步根据双足机器人的运动学方程，确定其余各关节的运动；第三步对各关节的运动轨迹进行修正，获得更加流畅的步态。本文关于步态规划的讨论在哈尔滨工业大学研制的小型双足机器人HIT—ROBoCEAN平台上展开。

### 1. 机器人姿态及重心轨迹规划

完整的步态规划包括姿态规划和ZMP轨迹的规划。姿态是指机器人在步行运动过程中，某一时刻各组件相对于参考坐标系的空间位置，可由步行运动过程中某一时刻各关节的广义坐标表示。ZMP（零力矩点）是指重力与惯性力合力的延长线与支撑面的交点，是目前步态规划中应用最广泛的稳定判据，其计算公式为：

![image](https://github.com/user-attachments/assets/27728ac1-58fe-4026-a0b1-648319d05079)

当机器人运动速度较慢时，惯性力可以忽略，上式简化为重心投影公式。针对ZMP的轨迹规划便简化为重心的轨迹规划。

![image](https://github.com/user-attachments/assets/7ced636f-7380-4ddc-a39a-94441807d025)

通过对人类步行运动数据的研究，并根据机器人的结构特点，对机器人行走时的基本姿态及运动轨迹进行规划：

- 机器人采用平行步态，双脚轨迹始终保持平行。
- 机器人重心在地面投影为正弦曲线。
- 行走过程中，髋关节距离地面高度保持不变。
- 机器人躯干始终保持与地面垂直。
- 摆动脚高度方向的运动轨迹为正弦曲线。
- 脚掌始终保持与地面平行。

利用正弦曲线规划机器人重心轨迹，避免了机器人重心在两个脚掌支撑面内转换所引起的冲击，同时也使关节的转动角度改变得更加平滑。此外，为了减小摆动脚着地时引起的冲击，规定摆动脚在高度方向上的运动轨迹为正弦曲线，这样在脚与地面接触的瞬间，速度为0。

### 2. 建立运动学模型

HIT—ROBOCEAN身高530 mm，重2.05 kg。以微型伺服马达作为驱动元件，共17个自由度。如图1所示为机器人的自由度配置。

![image](https://github.com/user-attachments/assets/5c5269fe-5a98-42aa-82aa-96ebd0cdfb37)

其腿部共10个自由度，全部是转动关节。首先，建立机器人腿部齐次坐标系，如图2所示。在建立运动学方程时，将机器人两条腿分别视为两个串联机构，在求解机器人运动学方程时，摆动脚相对于支撑脚的运动即可视为机器人中心相对于支撑脚运动和摆动脚相对于机器人中心运动的叠加，从而大大简化了计算量。

![image](https://github.com/user-attachments/assets/7dc5626a-15b8-4b96-bebe-98ae576d1979)

根据规划步态，上身始终保持与地面垂直，可知：

![image](https://github.com/user-attachments/assets/02091ca9-6667-4b5d-90c7-3c07380d8e45)

由此可以得到关节转动角度之间的关系：

![image](https://github.com/user-attachments/assets/8eb1dcb1-2686-4617-9339-a71fce0878b8)

对其化简得到：

![image](https://github.com/user-attachments/assets/10476c7e-12a7-4f2a-bb40-3e1f388c7f31)
![image](https://github.com/user-attachments/assets/ff3b491a-4d55-47e3-9c46-dc2f6b767bd0)

式中S，C——sin，COS，文中将一律采用此约定。同样由机器人行走过程中脚底始终保持与地面平行可知：

![image](https://github.com/user-attachments/assets/422d52fb-5a8a-4ab2-a3ff-775ab5b801c9)

得到关节转动角度之间的关系：

![image](https://github.com/user-attachments/assets/1ca91502-020b-4875-9fb9-adc68b4c9f1b)

对其化简得到：

![image](https://github.com/user-attachments/assets/40079533-6a4c-4562-8855-f3df5a8bcae6)

### 3. 求解关节运动轨迹

将前向和侧向运动分开求解。在机器人行走的过程中，需要通过侧向关节的转动来实现机器人重心在两个支撑脚内按正弦规律左右摆动，如图3所示。由规划的姿态可知：

![image](https://github.com/user-attachments/assets/6986f274-1d80-45f5-bdbb-8e1e2ced0acb) 
![image](https://github.com/user-attachments/assets/1eb2dfda-8c03-44b0-9665-51fb78af4e57)

![image](https://github.com/user-attachments/assets/76349dcc-68ef-4abd-b147-4af5fb8a6d1e)

根据规划的重心轨迹求解运动学方程，得到一个完整步态下随时间t的运动曲线，如图4所示。

![image](https://github.com/user-attachments/assets/bf93322f-b410-4742-b721-0973017740b8)

机器人在行走过程中，两条腿交替向前迈出。前向运动由前向关节的运动来实现，如图5所示。

![image](https://github.com/user-attachments/assets/37ccb2f0-2497-47d1-971c-137d5ddff571)

在求解机器人前向运动关节曲线时，假设侧向关节不运动，求解运动学方程，得到一个步态下前向关节随时间t的运动曲线，如图6所示。

![image](https://github.com/user-attachments/assets/a93a87bf-f51e-4e68-982c-d372b0aee683)

### 4. 轨迹修正

前向关节与侧向关节同时运动，使机器人重心摆动到两腿中间附近区域内脱离稳定区域。对于重心脱离稳定区域的解决方法是在这些时间段内，使机器人处于双脚支撑期，如图7所示。

![image](https://github.com/user-attachments/assets/57e4cad9-c2de-470a-b821-d79e45f7fa0a)

根据重心脱离稳定区域的时间，可以在重心摆动到左、右脚中心时，侧向关节停止运动相应的时间以等待前向关节的运动，前向关节在双脚支撑期同样停止相应的时间以等待侧向关节的运动。通过修正后，各关节运动曲线如图8所示。

![image](https://github.com/user-attachments/assets/8093f437-ec37-4a64-9bb6-a015b26e4013)

在摆动脚着地时，往往存在震动，这种震动随着时间累加，最终将导致机器人行走的不稳定。前向、侧向关节在每个步态周期内都有一段时间停止运动，有利于消除累积误差。

### 5. 实验

为了验证步态规划的可行性和有效性，在Matlab环境下建立机器人二维杆件模型，根据得出的关节运动曲线，分别对机器人侧向摆动和前向运动进行仿真，如图9所示。从仿真结果可以看出，所求得的关节运动曲线实现了规划的步态。将规划好的步态输入到HIT—ROBOCEAN的控制系统，用于驱动微型伺服马达使机器人行走，取得了良好效果。算法实现双足步态的可行性已经得到验证。

### c

摄像头：用于图像捕捉，分析交通流量、车辆行为和路况。

雷达与激光雷达：用于测量距离和速度，提供高精度的数据。

边缘检测：使用Canny算法识别道路边缘。

形态学处理：通过形态学操作提取结构特征。

准确性：通过实验数据评估算法的识别准确率。

实时性：分析系统在不同交通或路况条件下的响应时间。

### d

光散射法是一种常用的空气质量检测技术，特别适用于颗粒物（如PM2.5和PM10）的测量。下面是关于光散射法的详细信息：

原理：光散射法基于光与颗粒物相互作用的原理。当光使用激光或LED，提供稳定的光束。

散射检测器：用于捕捉散射光，通常是光电二极管或光电倍增管。

信号处理单元：将检测到的光信号转换为电信号，并进行分析。

显示和记录系统：用于显示实时数据和记录历史数据。束照射到空气中的颗粒物时，颗粒物会散射光。通过测量散射光的强度和角度，可以推算出颗粒物的浓度和特征。

### 参考文献

[1] 胡洪志，马宏绪．一种双足步行机器人的步态规划方法．机器人技术与应用，2022，(3)：16一18．  
[2] 蒙运红，傅详志．两足步行机器人动态步行规化及仿真．华中理工大学学报，2017，27(3)：28—31．  
[3] 石宗英，徐文立，冯元琨，方海军．仿人型机器人动态步行控制方法．哈尔滨工业大学学报，2014，33(1)：54—56．  
[4] 包志军，马培荪，仝建刚．人行走速度规律的实验研究．实验室研究与探索，2018。(6)：39—42．  
[5] 陈东辉，佟金，李重焕，张书军，陈秉聪．人和动物的步态与步行机器人．吉林大学学报(工学版)，2018，33(4)：47—49．  
[6] 刘延住，徐俊．人体步行的稳定性[J]．应用力学学报，2020，13(4)：22—27．  
[7] 张瑞红，金德闻，张济川，王人成，马琳．不同路况下正常步态特征研究．清华大学学报(自然科学版)，2016，40(8)：77--80．  
[8] 陈立新．两足步行机器人步态及运动稳定性分析．现代机械，1995，(1)：21—23．

来源：  
https://github.com/mylamour/MiracleUS/blob/master/SomeDate/%E6%AD%A5%E6%80%81/%E6%AD%A5%E6%80%81%E8%A7%84%E5%88%92/%E5%8F%8C%E8%B6%B3%E6%AD%A5%E8%A1%8C%E6%9C%BA%E5%99%A8%E4%BA%BA%E6%AD%A5%E6%80%81%E8%A7%84%E5%88%92%E6%96%B9%E6%B3%95%E7%A0%94%E7%A9%B6.pdf
